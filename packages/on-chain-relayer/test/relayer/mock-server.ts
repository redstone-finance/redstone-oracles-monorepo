import { http, HttpResponse } from "msw";
import { setupServer } from "msw/node";
import { getDataPackagesResponse, START_OEV_AUCTION_URL } from "../helpers";

const handlers = [
  http.get("http://mock-cache-service/data-packages/latest/redstone-main-demo", () => {
    return HttpResponse.json(getDataPackagesResponse());
  }),
  http.post(START_OEV_AUCTION_URL, () => {
    return HttpResponse.json({
      jsonrpc: "2.0",
      id: "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266_solverOpRequest_2025-06-30",
      result: [
        "0x02f90b59610185059682f00085059682f0008344aa2094164d3f6bd3e78220f59e33729aa0e473c57eb067872a34cc0bee8000b90ae44683d90f000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000004a00000000000000000000000000000000000000000000000000000000000000940000000000000000000000000ac302bcacb17e57896b7cf0b7ec60cca50bed57a000000000000000000000000164d3f6bd3e78220f59e33729aa0e473c57eb067000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000059682f00000000000000000000000000000000000000000000000000000000000000346080000000000000000000000000000000000000000000000000000000002af53db00000000000000000000000029017bbeab1f55827dcf873d46ebe1ab449d960c00000000000000000000000029017bbeab1f55827dcf873d46ebe1ab449d960c0000000000000000000000000000000000000000000000000000000000104e04000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000001e402a688ed00000000000000000000000061ed8ebd497d11654e91f5fafeadaaf4cb125e0c00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000177c14c920400000000000000000000000000000000000000000000000000000192c361326042544300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000062bb04502a90192c361326000000020000001b1b290598f3f9a5dff93a275001486e0849d090a8595ee909b5d77c06fd1fd21551aceee9fb1969d3baed32c4bafce91e980a00f5bf1b397fdfc57ea958fe4501c42544300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000062bb04502a90192c3613260000000200000014a3fe58d28dbe4a3457cd7f697ace559bdb4c8689aa29d630e05bff90bc8f306420a591c62524d3c1958a5df1efbc6d8dde2fb3dc6fb718e8c90ee7251f3c1ca1b00023137323938353437393336363223302e362e3223646174612d7061636b616765732d77726170706572000029000002ed57011e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000418fc4b21d87c6d073624aeebfc140c32fd52c4903290c495e093f7d8c6da6720675924175053117260fcf6903a9a201bb62eb4b09aaf479c977b6125750e2073f1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000059f3a597e6917166641353e66a94b756eae03bd2000000000000000000000000164d3f6bd3e78220f59e33729aa0e473c57eb067000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e8480000000000000000000000000000000000000000000000000000000059682f0000000000000000000000000000000000000000000000000000000000002af53db000000000000000000000000d37500eef3b3ae4fc6838190f623578d36375c7f00000000000000000000000029017bbeab1f55827dcf873d46ebe1ab449d960cf51fe12054e37fc0ef25831ef651e7d96a623e0c152a0bdbd3fdc4b4da94e0b3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005af3107a400000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000204bce5566c000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000a6c1d5320b8eb48af7238834ea792ea126c4d7590000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffff172b5af0000000000000000000000000000000000000000000028f5c28f5c28f600000000000000000000000000000000068d61838e5f1d345d6200ae78cd28565c3180a8a0000000000000000000000003b010ecf4d84d21bb0fdd6dc85af96f1f99ba2a3000000000000000000000000195b7c52fcc0f9e53934a52a3f624bf4d8d094610000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000100000000000000000000000045380e71e60e13ea4398e20690d17f3b0cec1b8c000000000000000000000000ae13d989dac2f0debff460ac112a837c89baa7cd000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000417c0dca7d6b34288da91e3ada36aa7e8a1e48fbe9ddba745d5e756cafbbdb04086b80fb02ff311ffe9217b33421474efb4d46f18c60207cc617b11877e4c6b4801c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff93d02b2741ccef85919c6bbcdcab97cef91152000000000000000000000000164d3f6bd3e78220f59e33729aa0e473c57eb06700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002af53db00000000000000000000000029017bbeab1f55827dcf873d46ebe1ab449d960c0000000000000000000000000000000000000000000000000000000000000000f51fe12054e37fc0ef25831ef651e7d96a623e0c152a0bdbd3fdc4b4da94e0b3fcd4aabb95d8261f4353efab33efdd11960831e45644637f938a794ec7d40e2000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000041a020846d563a4800793fd222aa3936b22db4c365e39046e2c317892770bbab9453ec7254317aa4b1ff4abdad9a06293feb8a2e170ab3758e66c6b69026b524041b00000000000000000000000000000000000000000000000000000000000000c0809f6920321ffcbb336caf183ddb090cf09f08e58d0d67abb1cfade58ef9bf00a6a0743eb5a7d45ffe182d4251d91c6e9677b801c9f1d81efed5c33b3ab8cf61e185",
      ],
    });
  }),
];

export const server = setupServer(...handlers);

before(() => {
  server.listen({ onUnhandledRequest: "bypass" });
});

after(() => {
  server.close();
});
