ARG VERSION
FROM redstone-monorepo:${VERSION}

WORKDIR /app/packages/on-chain-relayer

RUN yarn
RUN yarn compile
RUN yarn build

ENV RELAYER_ITERATION_INTERVAL=600000
ENV UPDATE_CONDITIONS='["time"]'
ENV UPDATE_PRICE_INTERVAL=3600000
ENV MIN_DEVIATION_PERCENTAGE=0
ENV RPC_URL=https://rpc.ankr.com/eth_goerli
ENV CHAIN_NAME="Goerli test network"
ENV CHAIN_ID=5
ENV PRIVATE_KEY=
ENV ADAPTER_CONTRACT_ADDRESS=
ENV DATA_SERVICE_ID=redstone-main-demo
ENV UNIQUE_SIGNERS_COUNT=1
ENV DATA_FEEDS=
ENV CACHE_SERVICE_URLS='["https://d1zm8lxy9v2ddd.cloudfront.net"]'
ENV GAS_LIMIT=5000000
ENV HEALTHCHECK_PING_URL=

CMD [ "yarn", "start" ]
