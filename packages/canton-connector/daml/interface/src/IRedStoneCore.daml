module IRedStoneCore where

import RedStoneTypes

interface IRedStoneCore where
  viewtype RedStoneCoreView

  getPrices : [RedStoneFeedId] -> Time -> PayloadHex -> Update RedStoneResult

  nonconsuming choice GetPrices : RedStoneResult
    with
      feedIds : [RedStoneFeedId]
      currentTime : Time
      payloadHex : PayloadHex
    controller (view this).viewers
    do
      getPrices this feedIds currentTime payloadHex

data RedStoneCoreView = RedStoneCoreView
  with
    viewers : [Party]
    coreId : Text
  deriving (Eq, Show, Ord)
